{% extends 'shared/layout/base_with_image.html.twig' %}

{% block title %}Loc'Appart - Mes messages{% endblock %}

{% block style %}
    <link rel="stylesheet" href="{{ asset('build/mail.css') }}">
{% endblock %}

{% block content %}
    <article class="s-12 l-12 center">
        <h2>Gestion des mails</h2>
        <p class="subtitile_presentation">Acceder à l'ensemble de vos mails</p>

        <div class="lines">
            <div class="mail-box">
                <aside class="lg-side">
                    <div class="inbox-head">
                        <h3>Boite de réceptions</h3>
                    </div>
                    <div class="inbox-body">
                        <div class="gestion-option">
                            <div class="gestion-text">
                                <div class="gestion-text-icon">
                                        <span class="fa-stack ">
                                          <i class="fa fa-circle fa-stack-2x"></i>
                                          <strong class="fa-stack-1x calendar-text" id="counter">{{ count }}</strong>
                                          <i class="fa fa-caret-down"></i>
                                        </span>
                                </div>
                                <h3> message(s)</h3>
                            </div>
                        </div>

                        <table class="table table-inbox table-hover table-responsive" id="messages">
                            <thead>
                            <tr class="header">
                                <th class="view-message date">Date</th>
                                <th class="view-message appartement">Appartement</th>
                                <th class="view-message expediteur">Expéditeur</th>
                                <th class="view-message sujet">Sujet</th>
                                <th class="inbox-small-cells action"></th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for appartment in appartments %}
                                {% for message in appartment.messages %}
                                    <tr>
                                        <td class="view-message date">{{ message.date | date("d/m/Y")}}</td>
                                        <td class="view-message ">{{ appartment.reference }}</td>
                                        <td class="view-message">{{ message.email }}</td>
                                        <td class="view-message">{{ message.subject }}<a class="link_form"><i class="fa fa-chevron-down"></i></a></td>
                                        <td class="inbox-small-cells"><button class="btn btn-primary btn_result delete" data-id="{{ message.id }}"><span class="glyphicon glyphicon-trash"></span> Supprimer</button></td>
                                    </tr>
                                    <tr style="display: none;">
                                        <td colspan="5">
                                            <div class="content_mail">{{ message.text }}</div>
                                        </td>
                                        <td style="display: none;"></td>
                                        <td style="display: none;"></td>
                                        <td style="display: none;"></td>
                                        <td style="display: none;"></td>
                                    </tr>
                                {% endfor %}
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </aside>
            </div>
        </div>
    </article>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('build/mail.js') }}"></script>
{% endblock %}